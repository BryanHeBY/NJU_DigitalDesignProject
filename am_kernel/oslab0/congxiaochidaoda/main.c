#include<legacy.h>
int Vyi8XZjDoj, PNOyOWxJpK;
struct JIGYRzzmas;
uint32_t J_Sl6Dag5p[8*5] = { 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0x000000, 0xffffff, 0x000000, 0xffffff, 0xffffff, 0x000000, 0xffffff, 0x000000, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0x88888888,0x88888888,0x88888888,0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff }; uint32_t Lr13OEObb4[8*5] = { 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0x000000, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0x000000, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0x88888888,0x88888888, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff }; uint32_t RsBhhiFFvE[8*5] = { 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0x000000, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0x000000, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0x88888888,0x88888888,0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff }; uint32_t yAFGLz8ME3[8*5] = { 0xffffff, 0x000000, 0xffffff, 0x000000, 0xffffff, 0xffffff, 0x000000, 0xffffff, 0x000000, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff }; uint32_t TSiSLYknYn[8*5] = { 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0x000000, 0xffffff, 0x000000, 0xffffff, 0xffffff, 0x000000, 0xffffff, 0x000000, 0xffffff };
uint32_t ExGIFMPbha[4*5] = { 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0, 0xffffff, 0, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff, 0xffffff };
uint32_t K7z_BayAM3[4*5] = { 0x00ffff, 0x00ffff, 0x00ffff, 0x00ffff, 0x00ffff, 0x00ffff, 0, 0x00ffff, 0, 0x00ffff, 0x00ffff, 0x00ffff, 0x00ffff, 0x00ffff, 0x00ffff, 0x00ffff, 0x00ffff, 0x00ffff, 0x00ffff, 0x00ffff };
uint32_t qBLBhlntx_[4*5] = { 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0, 0xff00ff, 0, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff, 0xff00ff };
uint32_t JCyb92PO2X[4*5] = { 0xffff00, 0xffff00, 0xffff00, 0xffff00, 0xffff00, 0xffff00, 0, 0xffff00, 0, 0xffff00, 0xffff00, 0xffff00, 0xffff00, 0xffff00, 0xffff00, 0xffff00, 0xffff00, 0xffff00, 0xffff00, 0xffff00 };
void WxSdxkcUJN();
void eZelonvCFU(int hck0ckSSZL);
void XD7kFstGd3();
void UQRn26Bmz5(int hck0ckSSZL);
void kZ6hP_qvSg();
void akI2wblQIp();
int oT4p6Ulx7J();
void W2yp9bnpy5(uint32_t *erf1kA3ufC, int IOjC2fkbCg, int SU7984_mkw, int GDOlvXNmhT, int XQvYgn4qpu);
struct JIGYRzzmas{
  int IOjC2fkbCg, SU7984_mkw, c0esYbnYow, pu0XGjLhxR, UaykZDyUUN, Vyi8XZjDoj, PNOyOWxJpK;
  int ufBizpkLbx;
  uint32_t *QkSY7m7Gvu;
  struct JIGYRzzmas *ukvKuleR4X;
} h72Vdp9m1b[] = {
  {0, 0, 0, 0, 1, 5, 8, 1, J_Sl6Dag5p, h72Vdp9m1b+1},
  {0, 0, 0, 0, 1, 5, 4, 0, NULL, NULL}
};
int vZkqLfCIMW;
static uint32_t gZ5nzpxC8r = 0x88888888;
int OqmibpybCn = 0;
int main() {
#ifdef FPGA_GRAGHIC_ON
  VGA_GRAPHIC_ON();
#endif
  _ioe_init();
  WxSdxkcUJN();
  akI2wblQIp();
  uint32_t PbckqMrTl2;
  uint32_t XaRzohPKKN = 0;
  uint32_t cZ5d65ts5U = 0;
  while (1) {
    while((PbckqMrTl2 = uptime()) < XaRzohPKKN){};
    kZ6hP_qvSg();
    int hck0ckSSZL;
    while((hck0ckSSZL = read_key()) != _KEY_NONE){
      if(!(hck0ckSSZL & 0x8000))
        continue;
      if(hck0ckSSZL == -1){
        printf("\33[1;31mread_key()读取失败\33[0m\n");
        assert(0);
      }
      UQRn26Bmz5(hck0ckSSZL ^ 0x8000);
    }
    XaRzohPKKN += 1000/100;
    if(PbckqMrTl2 > cZ5d65ts5U){
      XD7kFstGd3();
      cZ5d65ts5U += 1000/10;
    }
    if(oT4p6Ulx7J()){
      printf("\33[1;31m游戏结束，用时%d\33[0m\n", (int)uptime());
      for(int h7WHgbkyVu=0;h7WHgbkyVu < Vyi8XZjDoj;h7WHgbkyVu++)
        for(int Apv7PJcujL=0;Apv7PJcujL < PNOyOWxJpK;Apv7PJcujL++)
          W2yp9bnpy5(&gZ5nzpxC8r, h7WHgbkyVu, Apv7PJcujL, 1, 1);
      return 0;
    }
  }
  return 0;
}
void W2yp9bnpy5(uint32_t *erf1kA3ufC, int IOjC2fkbCg, int SU7984_mkw, int GDOlvXNmhT, int XQvYgn4qpu){
  draw_rect(erf1kA3ufC, IOjC2fkbCg, SU7984_mkw, GDOlvXNmhT, XQvYgn4qpu);
}
void WxSdxkcUJN() {
  Vyi8XZjDoj = screen_width();
  PNOyOWxJpK = screen_height();
  for(int h7WHgbkyVu=0;h7WHgbkyVu < Vyi8XZjDoj;h7WHgbkyVu++)
    for(int Apv7PJcujL=0;Apv7PJcujL < PNOyOWxJpK;Apv7PJcujL++)
      W2yp9bnpy5(&gZ5nzpxC8r, h7WHgbkyVu, Apv7PJcujL, 1, 1);
}
void raB0cxTuRP(struct JIGYRzzmas *AlM0UT25fL){
  if(AlM0UT25fL == NULL)
    return;
  if(0 > AlM0UT25fL->IOjC2fkbCg)
    AlM0UT25fL->IOjC2fkbCg = 0;
  if(AlM0UT25fL->IOjC2fkbCg+AlM0UT25fL->UaykZDyUUN*AlM0UT25fL->Vyi8XZjDoj >= Vyi8XZjDoj)
    AlM0UT25fL->IOjC2fkbCg = Vyi8XZjDoj - AlM0UT25fL->UaykZDyUUN*AlM0UT25fL->Vyi8XZjDoj;
  if(0 > AlM0UT25fL->SU7984_mkw)
    AlM0UT25fL->SU7984_mkw = 0;
  if(AlM0UT25fL->SU7984_mkw+AlM0UT25fL->UaykZDyUUN*AlM0UT25fL->PNOyOWxJpK >= PNOyOWxJpK)
    AlM0UT25fL->SU7984_mkw = PNOyOWxJpK - AlM0UT25fL->UaykZDyUUN*AlM0UT25fL->PNOyOWxJpK;
  uint32_t Wv1JqEgtYr[AlM0UT25fL->UaykZDyUUN*AlM0UT25fL->UaykZDyUUN];
  for(int h7WHgbkyVu=0;h7WHgbkyVu < AlM0UT25fL->Vyi8XZjDoj;h7WHgbkyVu++)
    for(int Apv7PJcujL=0;Apv7PJcujL < AlM0UT25fL->PNOyOWxJpK;Apv7PJcujL++){
      for(int pVquJtRsOw=0;pVquJtRsOw < AlM0UT25fL->UaykZDyUUN;pVquJtRsOw++)
        for(int hRIJHsqzlx=0;hRIJHsqzlx < AlM0UT25fL->UaykZDyUUN;hRIJHsqzlx++)
          Wv1JqEgtYr[pVquJtRsOw+AlM0UT25fL->UaykZDyUUN*hRIJHsqzlx] = gZ5nzpxC8r;
      draw_rect(Wv1JqEgtYr, AlM0UT25fL->c0esYbnYow+AlM0UT25fL->UaykZDyUUN*h7WHgbkyVu, AlM0UT25fL->pu0XGjLhxR+AlM0UT25fL->UaykZDyUUN*Apv7PJcujL, AlM0UT25fL->UaykZDyUUN, AlM0UT25fL->UaykZDyUUN);
    }
  for(int h7WHgbkyVu=0;h7WHgbkyVu < AlM0UT25fL->Vyi8XZjDoj;h7WHgbkyVu++)
    for(int Apv7PJcujL=0;Apv7PJcujL < AlM0UT25fL->PNOyOWxJpK;Apv7PJcujL++){
      for(int pVquJtRsOw=0;pVquJtRsOw < AlM0UT25fL->UaykZDyUUN;pVquJtRsOw++)
        for(int hRIJHsqzlx=0;hRIJHsqzlx < AlM0UT25fL->UaykZDyUUN;hRIJHsqzlx++)
          Wv1JqEgtYr[pVquJtRsOw+AlM0UT25fL->UaykZDyUUN*hRIJHsqzlx] = AlM0UT25fL->QkSY7m7Gvu[AlM0UT25fL->Vyi8XZjDoj*Apv7PJcujL+h7WHgbkyVu];
      draw_rect(Wv1JqEgtYr, AlM0UT25fL->IOjC2fkbCg+AlM0UT25fL->UaykZDyUUN*h7WHgbkyVu, AlM0UT25fL->SU7984_mkw+AlM0UT25fL->UaykZDyUUN*Apv7PJcujL, AlM0UT25fL->UaykZDyUUN, AlM0UT25fL->UaykZDyUUN);
    }
  AlM0UT25fL->c0esYbnYow = AlM0UT25fL->IOjC2fkbCg, AlM0UT25fL->pu0XGjLhxR = AlM0UT25fL->SU7984_mkw;
  raB0cxTuRP(AlM0UT25fL->ukvKuleR4X);
}
void XD7kFstGd3(){
  raB0cxTuRP(h72Vdp9m1b);
  draw_sync();
}
void UQRn26Bmz5(int hck0ckSSZL){
  OqmibpybCn = uptime();
  if(hck0ckSSZL == _KEY_UP){
    h72Vdp9m1b[0].SU7984_mkw--;
    h72Vdp9m1b[0].QkSY7m7Gvu = yAFGLz8ME3;
  }
  else if(hck0ckSSZL == _KEY_DOWN){
    h72Vdp9m1b[0].SU7984_mkw++;
    h72Vdp9m1b[0].QkSY7m7Gvu = TSiSLYknYn;
  }
  else if(hck0ckSSZL == _KEY_LEFT){
    h72Vdp9m1b[0].IOjC2fkbCg--;
    h72Vdp9m1b[0].QkSY7m7Gvu = RsBhhiFFvE;
  }
  else if(hck0ckSSZL == _KEY_RIGHT){
    h72Vdp9m1b[0].IOjC2fkbCg++;
    h72Vdp9m1b[0].QkSY7m7Gvu = Lr13OEObb4;
  }
}
void akI2wblQIp(){
  int mzR186wepk = Vyi8XZjDoj/h72Vdp9m1b[0].Vyi8XZjDoj;
  int Ni4LED3jUH = PNOyOWxJpK/h72Vdp9m1b[0].PNOyOWxJpK;
  if(mzR186wepk > Ni4LED3jUH)
    vZkqLfCIMW = Ni4LED3jUH;
  else
    vZkqLfCIMW = mzR186wepk;
}
int MTpeqVwHlI(int IOjC2fkbCg, int SU7984_mkw, int Vyi8XZjDoj, int PNOyOWxJpK, int tl7Kc3Gx6U, int Tr4A1w4VGP){
  return IOjC2fkbCg <= tl7Kc3Gx6U && tl7Kc3Gx6U < IOjC2fkbCg+Vyi8XZjDoj && SU7984_mkw <= Tr4A1w4VGP && Tr4A1w4VGP < SU7984_mkw+PNOyOWxJpK;
}
int wcwGfNsCkC(struct JIGYRzzmas *ceO5NPYidU, struct JIGYRzzmas *vK_Tb2f4LK){
  int T2L2xQFOiP = ceO5NPYidU->IOjC2fkbCg, ngSRbtwYAy = ceO5NPYidU->SU7984_mkw,
      Fs8Hb_xg29 = ceO5NPYidU->Vyi8XZjDoj*ceO5NPYidU->UaykZDyUUN, ly0rql8X0e = ceO5NPYidU->PNOyOWxJpK*ceO5NPYidU->UaykZDyUUN;
  int m5miMmA7_2 = vK_Tb2f4LK->IOjC2fkbCg, oHkucksBri = vK_Tb2f4LK->SU7984_mkw,
      c8HmnZyjKm = vK_Tb2f4LK->Vyi8XZjDoj*vK_Tb2f4LK->UaykZDyUUN, oafzhQLGOL = vK_Tb2f4LK->PNOyOWxJpK*vK_Tb2f4LK->UaykZDyUUN;
  return MTpeqVwHlI(T2L2xQFOiP, ngSRbtwYAy, Fs8Hb_xg29, ly0rql8X0e, m5miMmA7_2, oHkucksBri)
      || MTpeqVwHlI(T2L2xQFOiP, ngSRbtwYAy, Fs8Hb_xg29, ly0rql8X0e, m5miMmA7_2+c8HmnZyjKm, oHkucksBri)
      || MTpeqVwHlI(T2L2xQFOiP, ngSRbtwYAy, Fs8Hb_xg29, ly0rql8X0e, m5miMmA7_2, oHkucksBri+oafzhQLGOL)
      || MTpeqVwHlI(T2L2xQFOiP, ngSRbtwYAy, Fs8Hb_xg29, ly0rql8X0e, m5miMmA7_2+c8HmnZyjKm, oHkucksBri+oafzhQLGOL);
}
void kZ6hP_qvSg(){
  if((uptime()-OqmibpybCn)/100 > 5)
    h72Vdp9m1b[0].QkSY7m7Gvu = J_Sl6Dag5p;
 if(wcwGfNsCkC(h72Vdp9m1b, h72Vdp9m1b+1)){
   h72Vdp9m1b[0].UaykZDyUUN++;
   h72Vdp9m1b[1].ufBizpkLbx = 0;
 }
 if(h72Vdp9m1b[1].ufBizpkLbx){
   switch(rand()%4){
     case 0: h72Vdp9m1b[1].IOjC2fkbCg-=5; break;
     case 1: h72Vdp9m1b[1].IOjC2fkbCg+=5; break;
     case 2: h72Vdp9m1b[1].SU7984_mkw-=5; break;
     case 3: h72Vdp9m1b[1].SU7984_mkw+=5; break;
   }
 }
 else{
   struct JIGYRzzmas *AlM0UT25fL = h72Vdp9m1b+1;
    uint32_t Wv1JqEgtYr[AlM0UT25fL->Vyi8XZjDoj*AlM0UT25fL->PNOyOWxJpK*AlM0UT25fL->UaykZDyUUN*AlM0UT25fL->UaykZDyUUN];
    for(int h7WHgbkyVu=0;h7WHgbkyVu < AlM0UT25fL->Vyi8XZjDoj;h7WHgbkyVu++){
      for(int Apv7PJcujL=0;Apv7PJcujL < AlM0UT25fL->PNOyOWxJpK;Apv7PJcujL++){
        for(int pVquJtRsOw=0;pVquJtRsOw < AlM0UT25fL->UaykZDyUUN;pVquJtRsOw++)
          for(int hRIJHsqzlx=0;hRIJHsqzlx < AlM0UT25fL->UaykZDyUUN;hRIJHsqzlx++)
            Wv1JqEgtYr[pVquJtRsOw+AlM0UT25fL->UaykZDyUUN*hRIJHsqzlx] = gZ5nzpxC8r;
        draw_rect(Wv1JqEgtYr, AlM0UT25fL->c0esYbnYow+AlM0UT25fL->UaykZDyUUN*h7WHgbkyVu, AlM0UT25fL->pu0XGjLhxR+AlM0UT25fL->UaykZDyUUN*Apv7PJcujL, AlM0UT25fL->UaykZDyUUN, AlM0UT25fL->UaykZDyUUN);
      }
    }
    h72Vdp9m1b[1].ufBizpkLbx = 1;
    h72Vdp9m1b[1].IOjC2fkbCg = h72Vdp9m1b[1].c0esYbnYow = rand()%(Vyi8XZjDoj-h72Vdp9m1b[1].UaykZDyUUN*h72Vdp9m1b[1].Vyi8XZjDoj);
    h72Vdp9m1b[1].SU7984_mkw = h72Vdp9m1b[1].pu0XGjLhxR = rand()%(PNOyOWxJpK-h72Vdp9m1b[1].UaykZDyUUN*h72Vdp9m1b[1].PNOyOWxJpK);
    h72Vdp9m1b[1].UaykZDyUUN = rand()%3+1;
    switch(rand()%4){
      case 0: h72Vdp9m1b[1].QkSY7m7Gvu = ExGIFMPbha; break;
      case 1: h72Vdp9m1b[1].QkSY7m7Gvu = K7z_BayAM3; break;
      case 2: h72Vdp9m1b[1].QkSY7m7Gvu = qBLBhlntx_; break;
      case 3: h72Vdp9m1b[1].QkSY7m7Gvu = JCyb92PO2X; break;
    }
 }
}
int oT4p6Ulx7J(){
  return h72Vdp9m1b[0].UaykZDyUUN >= vZkqLfCIMW;
}
